#@beerwall_apitest_HostAddress = http://localhost:5254/api
#@beerwall_apitest_HostAddress = https://beerwall-apitest-cjcfgfehh9grhne5.polandcentral-01.azurewebsites.net/api
@beerwall_apitest_HostAddress = http://api-debug.igibeer.pl:7000
@token = eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IjExMTExMTExLTExMTEtMTExMS0xMTExLTExMTExMTExMTExMSIsImp0aSI6ImNjNjQwYzE4LWI3ZjAtNDZlMy05MDA5LWYyYzQ4YmZhMWZjOCIsInJvbGVzIjoiTW9iaWxlIiwiZXhwIjoxNzY4Mjg5MzgxLCJpc3MiOiJJZ2lCZWVyIiwiYXVkIjoiTW9iaWxlIn0.YZ_AkhnY4NiCSyi3wyug5HEuVdS727PULzhP_R7yRZ4

### 1. SignIn - Login i automatycznie zapisz token
# @name signin
POST {{beerwall_apitest_HostAddress}}/mobile/Auth/SignIn
Accept: application/json
Content-Type: application/json

{
  "email": "mobile",
  "password": "mobile"
}

> {%
    client.log("Raw body: " + JSON.stringify(response.body));

    client.global.set("net_token", response.body.data.tokenDto.token);
    client.global.set("refresh_token", response.body.data.tokenDto.refreshToken);
    client.log("✓ Token zapisany, wygasa za: " + response.body.data.tokenDto.tokenExpires + "s");
    client.log("  Token: " + response.body.data.tokenDto.token.substring(0, 50) + "...");
%}

### 2. RefreshToken - Odśwież wygasły token
# @name refreshToken
GET {{beerwall_apitest_HostAddress}}/mobile/Auth/RefreshToken
Accept: application/json
Authorization: Bearer {{token}}
Content-Type: application/json

> {%
    client.global.set("net_token", response.body.data.token);
    client.global.set("refresh_token", response.body.data.refreshToken);
    client.log("✓ Token odświeżony, nowy wygasa za: " + response.body.data.tokenExpires + "s");
%}

### 3. GoogleSignIn - Logowanie przez Google
# @name googleSignIn
POST {{beerwall_apitest_HostAddress}}/mobile/Auth/GoogleSignIn
Accept: application/json
Content-Type: application/json

{
  "idToken": "GOOGLE_ID_TOKEN_HERE"
}

> {%
    client.global.set("net_token", response.body.data.token);
    client.global.set("refresh_token", response.body.data.refreshToken);
    client.log("✓ Token z Google zapisany");
%}

### 4. GetCards - Pobierz karty (używa zapisanego tokenu)
GET {{beerwall_apitest_HostAddress}}/mobile/Card
Accept: application/json
Authorization: Bearer {{token}}

### 5. ToggleCardStatus - Aktywuj/Dezaktywuj kartę
POST {{beerwall_apitest_HostAddress}}/mobile/Card/Activation
Accept: application/json
Content-Type: application/json
Authorization: Bearer {{token}}

{
  "cardId": "550e8400-e29b-41d4-a716-446655440000",
  "activate": true
}

### 6. GetHistory - Pobierz historię transakcji
GET {{beerwall_apitest_HostAddress}}/mobile/User/History
Accept: application/json
Authorization: Bearer {{token}}

### 7. GetPaymentOperators - Pobierz operatorów płatności
GET {{beerwall_apitest_HostAddress}}/mobile/Payment/operators
Accept: application/json
Authorization: Bearer {{token}}

### 8. GetBalance - Pobierz saldo
GET {{beerwall_apitest_HostAddress}}/mobile/User/balance
Accept: application/json
Authorization: Bearer {{token}}

### 9. TopUp - Doładuj konto
POST {{beerwall_apitest_HostAddress}}/mobile/Payment/top-up
Accept: application/json
Content-Type: application/json
Authorization: Bearer {{net_token}}

{
  "venueId": 1,
  "paymentMethodId": 1,
  "amount": 50.00
}

### GoogleSignIn
POST {{beerwall_apitest_HostAddress}}/mobile/Auth/GoogleSignIn
Authorization: Bearer eyJhbGciOiJSUzI1NiIsImtpZCI6IjRiYTZlZmVmNWUxNzIxNDk5NzFhMmQzYWJiNWYzMzJlMGY3ODcxNjUiLCJ0eXAiOiJKV1QifQ.eyJpc3MiOiJodHRwczovL2FjY291bnRzLmdvb2dsZS5jb20iLCJhenAiOiIyMjA1MjI5MzI2OTQtcWdjdTNtaGtnbmE5anNwMzdxMWcxNnM4MTNraTVvN2wuYXBwcy5nb29nbGV1c2VyY29udGVudC5jb20iLCJhdWQiOiIyMjA1MjI5MzI2OTQtZ2hhbWdvcXBxdG1iMHZrOWFqbm91aXFlMmg1MmF0ZWIuYXBwcy5nb29nbGV1c2VyY29udGVudC5jb20iLCJzdWIiOiIxMDc0Nzk3NTQ4MDY2MDQzOTMzNDQiLCJlbWFpbCI6ImFkcmlhbi5ib3RvckBnbWFpbC5jb20iLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwibmFtZSI6IkFkcmlhbiBCb3RvciIsInBpY3R1cmUiOiJodHRwczovL2xoMy5nb29nbGV1c2VyY29udGVudC5jb20vYS9BQ2c4b2NKbkhDR0JIanpvVndBaVlJMnBaaU1zNlFQV2JUTmpNVFF4RXRHYVBnOGd0bkZRVUE9czk2LWMiLCJnaXZlbl9uYW1lIjoiQWRyaWFuIiwiZmFtaWx5X25hbWUiOiJCb3RvciIsImlhdCI6MTc2ODEzMTM1MCwiZXhwIjoxNzY4MTM0OTUwfQ.HrU0i3f2TZ40yWJAsNOB1fzvwaNIi5KLoRTgzhcKc7zTFixriktgkKx02pQPMUGHHVtPn-ncVcupGwQuK72NuFCWcNNNrGqkncREWVgML0nr28I-H3y6sJcV_Az4vEnlPe-p9qwxXcM_aDuRrtPq3Cut4nvrRBqEl02SJDYU_6rPy1W3pKJdyiDAoRcdDhjyAtQ9vM76AnCWPJdt_zTzk4jdqezz5fO8goCdNGEnSEnlmPMM5kOBiMpw2UfVubEv9ulrzN-fTWPvAhZEYAg7QHI3UUyaA5NL_pPJ0g3nqqobsjfk8QsPeCL_1J5zTNVeRZj7oh08cba69AkT90iWIA
