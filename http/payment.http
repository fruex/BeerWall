### Utwórz nową płatność w Paynow
< {%
    const signatureKey = client.global.get("signature_key");

    // Definiujemy obiekt danych (Twoje dane)
    const paymentData = {
        "amount": 100,
        "currency": "PLN",
        "externalId": "order_12345",
        "description": "Testowa płatność",
        "buyer": {
            "email": "jan.kowalski@example.com"
        }
    };

    // Konwertujemy na tekst (ważne: brak spacji/nowych linii dla zgodności podpisu)
    const bodyText = JSON.stringify(paymentData);

    // Obliczamy podpis HMAC-SHA256 i kodujemy do Base64
    const signature = crypto.hmac.sha256()
        .withTextSecret(signatureKey)
        .updateWithText(bodyText)
        .digest().toBase64();

    // Ustawiamy zmienne do użycia w zapytaniu poniżej
    request.variables.set("computed_body", bodyText);
    request.variables.set("computed_signature", signature);
%}
POST {{api_url}}/v1/payments
Api-Key: {{api_key}}
Idempotency-Key: {{$uuid}}
Signature: {{computed_signature}}
Content-Type: application/json

{{computed_body}}

> {%
    client.test("Płatność utworzona poprawnie", function() {
        client.assert(response.status === 201, "Status powinien być 201 Created");
    });

    // Wyciąga link do płatności i wyświetla go w konsoli testów
    if (response.status === 201) {
        client.log("Link do płatności: " + response.body.redirectUrl);
        client.global.set("last_payment_id", response.body.paymentId);
    }
%}

### Utwórz płatność Paynow (Statyczne zapytanie)
POST https://api.sandbox.paynow.pl/v1/payments
Api-Key: 499ee10c-8e82-481c-8603-e66408a5abaf
Signature: GxERYZjz7Il4GEa0Fad8xQElhqEedF+UmCYxVXAiiWU=
Idempotency-Key: test-manual-unique-123
Content-Type: application/json

{
  "amount": 100,
  "currency": "PLN",
  "externalId": "order_12345",
  "description": "Testowa platnosc",
  "buyer": {
    "email": "jan.kowalski@example.com"
  }
}